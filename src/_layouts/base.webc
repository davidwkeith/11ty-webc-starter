<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title @text="$data.title ? `${$data.title} â€” ${$data.site.title}` : $data.site.title"></title>
    
    <meta webc:is="head-meta" />
    <link webc:is="head-link" />
    <script webc:is="head-js"></script>
  </head>
  <body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <header>
      <nav webc:if="$data.site.hasNavigation">
        <a webc:for="item in $data.navigation" :href="item.url" @text="item.text"></a>
      </nav>
    </header>
    <main id="main-content">
      <slot><template webc:nokeep @raw="this.content"></template></slot>
      <div webc:is="webmentions" webc:if="$data.site.hasWebmentions"></div>
    </main>
    <footer></footer>
    <style webc:keep @raw="getBundle('css', 'defer')"></style>
		<script webc:keep @raw="getBundle('js', 'defer')"></script>
    <script webc:if="$data.site.hasPWA">
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .then(registration => {
              console.log('Service Worker registered: ', registration);
            })
            .catch(error => {
              console.error('Service Worker registration failed: ', error);
            });
        });
      }
    </script>
  </body>
</html>